~[if#pageaction.~[gpv:action]#getresults]
<!DOCTYPE html>
<html>
<head>
<!--[CRM BEGIN]-->
<title>Barcode List</title>
<!--[CRM END]-->
<link href="/images/css/screen.css" rel="stylesheet" media="screen">
<link href="/images/css/print.css" rel="stylesheet" media="print">
<link rel="stylesheet" href="/images/css/theme/crm-css/jquery-ui.custom.css" type="text/css">
<link rel="stylesheet" href="/admin/includes/template/reports-common.css" type="text/css" media="all">
<link rel="stylesheet" href="/admin/includes/template/reports-printable.css" type="text/css" media="print">
<link rel='stylesheet' href='https://fonts.googleapis.com/css?family=Libre Barcode 39' type="text/css">
<style>
td#barcode {
    font-family: 'Libre Barcode 39';font-size: 24px;
}
</style>
~[x:insertfile;/scripts/custom-jquery-1.0.html]
~[x:insertfile;/scripts/custom-datatables-1.0.html]
~[x:insertfile;/admin/includes/template/reports-commonscripts.html]
<meta name="author" content="Logan.Arias@lawrence.k12.ma.us" />
<meta name="description" content="" />
<meta name="version" content="1.0.0" />
<!--[CRM END]-->
<link href="/images/css/screen.css" rel="stylesheet" media="screen">
<link href="/images/css/print.css" rel="stylesheet" media="print">
<link rel="stylesheet" href="/images/css/theme/crm-css/jquery-ui.custom.css" type="text/css">
<link rel="stylesheet" href="/admin/includes/template/reports-common.css" type="text/css" media="all">
<link rel="stylesheet" href="/admin/includes/template/reports-printable.css" type="text/css" media="print">
~[x:insertfile;/scripts/custom-jquery-1.0.html]
~[x:insertfile;/scripts/custom-datatables-1.0.html]
~[x:insertfile;/admin/includes/template/reports-commonscripts.html]
<script type="text/javascript">
(function($){
	var reportdataURL ='/~[self]';
	var pageseperator ='<hr class="noprint pageseperator" /><div class="pbreak"><span style="display: none">&nbsp;</span></div>';
	var totalreports = 0;

	$(function(){
		clearError();
		$("#reportresult").empty();
		$("#reportresult").html('<span id="loader">Loading <img src="' +$("#busyimage").attr("src")+'" /></span>');
		var settings = {"action":"getresults"};
		$.get(reportdataURL, settings
		)
		.done(processReportResults)
		.fail(function(xhr, status, error){
			$('#loader').hide();
			displayError("Report failed to load. Status Message: " +status);
		});
	});//end jquery.ready
	  
	function processReportResults(data){
		$('#reportresult').html(data);
		$('#reportresult table').addClass('display').dataTable({
			"bPaginate": false,
			"bFilter": false,
			"bJQueryUI": true,
			"sDom": 'T<"H"fr>t<"F"ip>',
			"oTableTools": {
				"sSwfPath":"/scripts/tabletools/swf/copy_cvs_xls_pdf.swf"
			},
			"fnDrawCallback":redrawRowLabels,
			"aoColumnDefs":[
				{"bSortable":false, "aTargets":[0]}
			]
		});
	}
	function redrawRowLabels(oSettings){
	/* Need to redo the counters if filtered or sorted */
		if ( oSettings.bSorted || oSettings.bFiltered ){
			for ( var i=0, iLen=oSettings.aiDisplay.length ; i<iLen ; i++ ){
				$('td:eq(0)', oSettings.aoData[ oSettings.aiDisplay[i] ].nTr ).html( i+1 );
			}
		}
	}
	function displayError(msg){
		$('#error_container').html('<div id="alertmsg" style="padding: 0pt 0.7em;" class="ui-state-error ui-corner-all"><p><span style="float: left; margin-right: 0.3em;" class="ui-icon ui-icon-alert"></span><strong>Alert: </strong>'+msg+'</p></div>').show();
	}
	function clearError(){
		$('#error_container').empty().hide();
	}
})(jQuery);
</script>
~[wc:commonscripts]
</head>
<body>
~[x:insertfile;/admin/includes/template/admin_reportheader_start.html]
Barcode List
~[x:insertfile;/admin/includes/template/admin_reportheader_end.html]
<img id="busyimage" style="display:none;" src="/images/busy_blue.gif" />
	
<div id="reportcontent" class="rounded_block">
<h2 class="noprint">Barcode List</h2>
<div id="reportresult" class="rounded_block"></div><!-- End report result-->
<p align="center">Report generated at ~[time] on ~[date]</p>
</div>

<!-- end content -->
~[x:insertfile;/admin/includes/template/pds_copyright_footer.html]
</body>
</html>
[else#pageaction]
<table border="0" cellspacing="0" cellpadding="4" align="center" id="sorttedtable">
<thead>
	<tr class="headerRow" align="left">
	    <th>Row#</th>
<th>LASID</th>
<th>FIRSTNAME</th>
<th>LASTNAME</th>
<th>Teacher Name</th>
<th>Barcode</th>

</tr>
</thead>

<tbody>
~[tlist_sql;select st.student_number,
st.last_name, 
st.first_name,
US.homeroom_teacher,
st.student_number as Barcode

from students st
left join U_def_ext_students US ON st.dcid=us.studentsdcid
LEFT OUTER JOIN StudentCoreFields ON st.dcid = StudentCoreFields.studentsdcid
where st.enroll_status in (0,-1) and st.schoolid=~(curschoolid)

;]
	<tr class="oddrow">
	    <td></td>
   <td>~(st.student_number)</td>
<td>~(st.last_name)</td>
<td>~(st.first_name)</td>
<td>~(US.homeroom_teacher)</td>
<td id="barcode">~(Barcode)</td>
</tr>
[/tlist_sql]
</tbody>
</table>
[/if#pageaction]